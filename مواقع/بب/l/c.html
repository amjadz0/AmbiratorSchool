<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± â€” Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©</title>
    <link rel="stylesheet" href="css/style.css" />
   <style>/* ============================================
   Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… â€” Ù„ÙˆØ­Ø© Ø£Ù„ÙˆØ§Ù† Ù†ÙŠÙˆÙ† Ù…ØªØ¯Ø±Ø¬Ø©
   ============================================ */
:root {
    --btn-height: 72px;
    --btn-min-width: 200px;
    --btn-padding: 12px 20px;
    --icon-size: 60px;
    --border-radius: 20px;
    --transition-speed: 0.4s;
    
    /* Ø£Ù„ÙˆØ§Ù† Ù†ÙŠÙˆÙ† Ø­Ø¯ÙŠØ«Ø© */
    --light-start: #00ff9d;
    --light-end: #00d4ff;
    --medium-start: #ffd387;
    --medium-end: #ff9800;
    --heavy-start: #ff4d94;
    --heavy-end: #ff006e;
    --pro-start: #ff00cc;
    --pro-end: #00ccff;
    
    /* Ø®Ù„ÙÙŠØ§Øª Ø´ÙØ§ÙØ© (Glassmorphism) */
    --glass-bg: rgba(255, 255, 255, 0.15);
    --glass-border: rgba(255, 255, 255, 0.25);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    
    /* Ø¸Ù„Ø§Ù„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© */
    --shadow-soft: 0 15px 35px rgba(0, 0, 0, 0.1);
    --shadow-hover: 0 25px 50px rgba(0, 0, 0, 0.2);
    --shadow-selected: 0 0 0 4px currentColor;
    
    /* ØªØ¨Ø§ÙŠÙ† Ø§Ù„Ù†ØµÙˆØµ */
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.85);
}

/* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…ØªØ¯Ø±Ø¬Ø© */
body {
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    min-height: 100vh;
    font-family: 'Segoe UI', 'Noto Naskh Arabic', Tahoma, sans-serif;
}

/* ============================================
   Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø©
   ============================================ */
.difficulty-header {
    text-align: center;
    margin-bottom: 40px;
    animation: fadeInDown 0.8s ease-out;
}

.difficulty-title {
    font-size: 2.5rem;
    font-weight: 800;
    margin: 0;
    background: linear-gradient(45deg, var(--text-primary), var(--pro-end));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.difficulty-subtitle {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-top: 8px;
    opacity: 0.9;
}


/* ============================================
   Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ø²Ø±Ø§Ø± â€” Ø§Ù„ØªØ®Ø·ÙŠØ·
   ============================================ */
.modes-wrapper {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 24px;
    max-width: 1000px;
    margin: 0 auto;
}


/* ============================================
   Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ â€” Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
   ============================================ */
.mode-btn {
    position: relative;
    display: flex;
    align-items: center;
    gap: 16px;
    min-width: var(--btn-min-width);
    height: var(--btn-height);
    padding: var(--btn-padding);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius);
    background: var(--glass-bg);
    color: var(--text-primary);
    cursor: pointer;
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-soft);
    transition: all var(--transition-speed) cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, box-shadow;
    overflow: hidden;
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¶ÙŠØ¡ */
.mode-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s;
}

.mode-btn:hover::before {
    left: 100%;
}

/* Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ */
.mode-btn:hover {
    transform: translateY(-5px) scale(1.03);
    box-shadow: var(--shadow-hover);
}

.mode-btn:active {
    transform: translateY(-2px) scale(0.98);
}

.mode-btn:focus {
    outline: 3px solid currentColor;
    outline-offset: 3px;
}

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø®ØªØ§Ø± */
.mode-btn[aria-selected="true"] {
    transform: scale(1.05);
    box-shadow: var(--shadow-selected);
    border-color: currentColor;
    z-index: 2;
}


/* ============================================
   Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø²Ø± â€” Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯
   ============================================ */
.mode-icon-wrapper {
    width: var(--icon-size);
    height: var(--icon-size);
    flex-shrink: 0;
    perspective: 1000px;
}

.mode-icon {
    width: 100%;
    height: 100%;
    transition: transform var(--transition-speed);
}

.mode-btn:hover .mode-icon {
    transform: scale(1.1) rotateY(10deg);
}


/* ============================================
   Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø²Ø± â€” Ø§Ù„Ù†ØµÙˆØµ
   ============================================ */
.mode-info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    text-align: right;
    flex: 1;
    min-width: 0;
}

.mode-label {
    font-weight: 700;
    font-size: 1.1rem;
    line-height: 1.2;
    letter-spacing: 0.5px;
}

.mode-desc {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: 4px;
    opacity: 0.9;
}


/* ============================================
   Ø§Ù„Ø´Ø§Ø±Ø§Øª (Badges)
   ============================================ */
.mode-badge {
    margin-right: auto;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid currentColor;
    color: currentColor;
}

.mode-badge.vip {
    background: linear-gradient(45deg, #ffd700, #ffed4e);
    color: #1a1a1a;
    animation: vip-pulse 2s infinite;
}

@keyframes vip-pulse {
    0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
    50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
}


/* ============================================
   Ø£Ù†Ù…Ø§Ø· Ø®Ø§ØµØ© Ø¨ÙƒÙ„ ÙˆØ¶Ø¹ â€” Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù†ÙŠÙˆÙ†
   ============================================ */
.mode-btn.light {
    color: var(--light-start);
}

.mode-btn.medium {
    color: var(--medium-start);
}

.mode-btn.heavy {
    color: var(--heavy-start);
}

.mode-btn.pro {
    color: var(--pro-start);
}


/* ============================================
   Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© â€” ØªØµÙ…ÙŠÙ… Glassmorphism
   ============================================ */
.preview-box {
    margin-top: 40px;
    padding: 24px;
    border-radius: var(--border-radius);
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(12px);
    box-shadow: var(--shadow-soft);
    transition: all var(--transition-speed);
}

.preview-content {
    display: flex;
    align-items: center;
    gap: 20px;
}

.preview-visual {
    width: 60px;
    height: 60px;
    flex-shrink: 0;
    border-radius: 12px;
    background: currentColor;
    opacity: 0.2;
    transition: all var(--transition-speed);
    animation: preview-pulse 2s infinite;
}

.preview-text {
    flex: 1;
}

.preview-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin: 0 0 8px 0;
    color: var(--text-primary);
}

.preview-desc {
    margin: 0;
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.4;
}


/* ============================================
   Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© â€” ØªØ£Ø«ÙŠØ±Ø§Øª Ø­ÙŠØ©
   ============================================ */
@keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-30px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes preview-pulse {
    0%, 100% { transform: scale(1); opacity: 0.2; }
    50% { transform: scale(1.1); opacity: 0.3; }
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© Ø¨ÙƒÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø© */
.mode-btn.light .pulse-dot {
    animation: light-pulse 2s infinite;
}

@keyframes light-pulse {
    0%, 100% { r: 5; opacity: 0.6; }
    50% { r: 7; opacity: 1; }
}

.mode-btn.medium .bar {
    animation: bar-grow 1.6s infinite;
}

.mode-btn.medium .bar:nth-child(1) { animation-delay: 0s; }
.mode-btn.medium .bar:nth-child(2) { animation-delay: 0.3s; }
.mode-btn.medium .bar:nth-child(3) { animation-delay: 0.6s; }

@keyframes bar-grow {
    0%, 100% { transform: scaleY(1); }
    50% { transform: scaleY(1.2); }
}

.mode-btn.heavy .particle {
    animation: particle-float 1.8s infinite ease-in-out;
}

.mode-btn.heavy .particle:nth-child(1) { animation-delay: 0s; }
.mode-btn.heavy .particle:nth-child(2) { animation-delay: 0.2s; }
.mode-btn.heavy .particle:nth-child(3) { animation-delay: 0.4s; }

@keyframes particle-float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

.mode-btn.pro .star-rotate {
    animation: star-twinkle 2.6s infinite;
}

@keyframes star-twinkle {
    0%, 100% { transform: scale(0.9) rotate(0deg); }
    50% { transform: scale(1.1) rotate(18deg); }
}

.mode-btn.pro .flame {
    animation: flame-flicker 0.9s infinite;
}

@keyframes flame-flicker {
    0%, 100% { ry: 8; }
    50% { ry: 12; }
}


/* ============================================
   Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨
   ============================================ */
@media (max-width: 768px) {
    .modes-wrapper {
        grid-template-columns: 1fr;
    }
    
    .mode-btn {
        width: 100%;
    }
    
    .difficulty-title {
        font-size: 2rem;
    }
}

@media (max-width: 480px) {
    :root {
        --btn-height: 68px;
        --icon-size: 52px;
    }
    
    .difficulty-title {
        font-size: 1.5rem;
    }
    
    .preview-content {
        flex-direction: column;
        text-align: center;
    }
}</style>
</head>
<body class="default">
    <main class="difficulty-container">
        <div class="difficulty-header">
            <h2 class="difficulty-title">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©</h2>
            <p class="difficulty-subtitle">ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰ ÙŠÙ‚Ø¯Ù‘Ù… ØªØ¬Ø±Ø¨Ø© ÙØ±ÙŠØ¯Ø© Ù…ØµÙ…Ù‘Ù…Ø© Ø®ØµÙŠØµØ§Ù‹ Ù„Ùƒ</p>
        </div>

        <div class="modes-wrapper" role="tablist" aria-label="Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ØµØ¹ÙˆØ¨Ø©">
            <!-- Ø®ÙÙŠÙ -->
            <button class="mode-btn light" data-mode="light" role="tab" aria-selected="false" aria-controls="previewBox">
                <div class="mode-icon-wrapper">
                    <svg class="mode-icon" viewBox="0 0 64 64" aria-hidden="true">
                        <defs>
                            <radialGradient id="light-gradient">
                                <stop offset="0%" stop-color="#00ff9d" />
                                <stop offset="100%" stop-color="#00d4ff" />
                            </radialGradient>
                        </defs>
                        <circle class="glow-bg" cx="32" cy="32" r="18" fill="url(#light-gradient)" />
                        <circle class="pulse-dot" cx="32" cy="32" r="6" fill="#fff" />
                    </svg>
                </div>
                <div class="mode-info">
                    <span class="mode-label">Ø®ÙÙŠÙ</span>
                    <span class="mode-desc">Ø¨Ø¯Ø§ÙŠØ© Ù…Ø±ÙŠØ­Ø© Ù…Ø¹ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ©</span>
                </div>
                <div class="mode-badge">Ù…Ø¨ØªØ¯Ø¦</div>
            </button>

            <!-- Ù…ØªÙˆØ³Ø· -->
            <button class="mode-btn medium" data-mode="medium" role="tab" aria-selected="false" aria-controls="previewBox">
                <div class="mode-icon-wrapper">
                    <svg class="mode-icon" viewBox="0 0 64 64" aria-hidden="true">
                        <rect class="bar" x="12" y="28" width="8" height="24" rx="2" fill="#ffd387" />
                        <rect class="bar" x="28" y="20" width="8" height="32" rx="2" fill="#ffb74d" />
                        <rect class="bar" x="44" y="12" width="8" height="40" rx="2" fill="#ff9800" />
                    </svg>
                </div>
                <div class="mode-info">
                    <span class="mode-label">Ù…ØªÙˆØ³Ø·</span>
                    <span class="mode-desc">ØªØ­Ø¯Ù‘Ù Ù…ØªÙˆØ§Ø²Ù† Ù…Ø¹ Ù…ÙŠØ²Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</span>
                </div>
                <div class="mode-badge">Ù…Ø­ØªØ±Ù</div>
            </button>

            <!-- Ø«Ù‚ÙŠÙ„ -->
            <button class="mode-btn heavy" data-mode="heavy" role="tab" aria-selected="false" aria-controls="previewBox">
                <div class="mode-icon-wrapper">
                    <svg class="mode-icon" viewBox="0 0 64 64" aria-hidden="true">
                        <g class="particles">
                            <circle class="particle" cx="20" cy="36" r="5" fill="#ff4d94" />
                            <circle class="particle" cx="32" cy="20" r="7" fill="#ff2d92" />
                            <circle class="particle" cx="44" cy="44" r="9" fill="#ff006e" />
                        </g>
                    </svg>
                </div>
                <div class="mode-info">
                    <span class="mode-label">Ø«Ù‚ÙŠÙ„</span>
                    <span class="mode-desc">ØªØ­Ø¯Ù‘Ù Ù‚ÙˆÙŠ Ù„Ù„Ø®Ø¨Ø±Ø§Ø¡</span>
                </div>
                <div class="mode-badge">Ø®Ø¨ÙŠØ±</div>
            </button>

            <!-- Ù…ØªØ®ØµØµ -->
            <button class="mode-btn pro" data-mode="pro" role="tab" aria-selected="false" aria-controls="previewBox">
                <div class="mode-icon-wrapper">
                    <svg class="mode-icon" viewBox="0 0 64 64" aria-hidden="true">
                        <defs>
                            <linearGradient id="pro-gradient" x1="0%" x2="100%">
                                <stop offset="0%" stop-color="#ff00cc" />
                                <stop offset="100%" stop-color="#00ccff" />
                            </linearGradient>
                            <filter id="pro-glow" x="-50%" y="-50%" width="200%" height="200%">
                                <feGaussianBlur stdDeviation="4" result="blur" />
                                <feMerge>
                                    <feMergeNode in="blur" />
                                    <feMergeNode in="SourceGraphic" />
                                </feMerge>
                            </filter>
                        </defs>
                        <g class="rocket-group">
                            <path d="M34 10 L42 28 L34 46 L26 28 Z" fill="url(#pro-gradient)" filter="url(#pro-glow)" />
                            <circle cx="32" cy="28" r="4" fill="#08213a" />
                            <ellipse class="flame" cx="32" cy="54" rx="6" ry="8" fill="#ffd07a" />
                            <g class="star-rotate">
                                <polygon points="2,0 3,3 6,3.5 3.8,5.8 4.3,9 2,7.2 -0.3,9 0.2,5.8 -1.8,3.5 1,3" fill="#fff" />
                            </g>
                        </g>
                    </svg>
                </div>
                <div class="mode-info">
                    <span class="mode-label">Ù…ØªØ®ØµØµ âœ¨</span>
                    <span class="mode-desc">Ø£Ù‚ØµÙ‰ Ù‚Ø¯Ø±Ø§Øª Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©</span>
                </div>
                <div class="mode-badge vip">VIP</div>
            </button>
        </div>

        <section class="preview-box" id="previewBox" aria-live="polite">
            <div class="preview-content">
                <div class="preview-visual" id="previewVisual"></div>
                <div class="preview-text">
                    <h3 class="preview-title" id="previewTitle">Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©</h3>
                    <p class="preview-desc" id="previewExplanation">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ù„ØªØ´Ø§Ù‡Ø¯ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø­ÙŠØ©</p>
                </div>
            </div>
        </section>
    </main>

    <script src="g.js">/**
 * @file Ù…Ø­Ø³Ù‘Ù† â€” Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
 */

class DifficultySelectorEnhanced {
    constructor() {
        this.modeButtons = document.querySelectorAll('.mode-btn');
        this.previewBox = document.getElementById('previewBox');
        this.previewTitle = document.getElementById('previewTitle');
        this.previewDesc = document.getElementById('previewExplanation');
        this.previewVisual = document.getElementById('previewVisual');
        
        this.init();
    }

    modeData = {
        light: {
            title: 'ğŸŒŸ Ø®ÙÙŠÙ â€” Ø¨Ø¯Ø§ÙŠØ© Ù…Ø±ÙŠØ­Ø©',
            desc: 'ØªØ¬Ø±Ø¨Ø© Ø³Ù„Ø³Ø© Ù…Ø¹ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆØ®Ø·ÙˆØ§Øª ÙˆØ§Ø¶Ø­Ø©',
            color: '#00ff9d'
        },
        medium: {
            title: 'ğŸ“Š Ù…ØªÙˆØ³Ø· â€” Ø§Ù„ØªÙˆØ§Ø²Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ',
            desc: 'Ù…Ø²ÙŠØ¬ Ù…Ø«Ø§Ù„ÙŠ Ø¨ÙŠÙ† Ø§Ù„ØªØ­Ø¯ÙŠ ÙˆØ§Ù„Ù…ØªØ¹Ø© Ù…Ø¹ Ù…ÙŠØ²Ø§Øª Ø°ÙƒÙŠØ©',
            color: '#ffb74d'
        },
        heavy: {
            title: 'âš¡ Ø«Ù‚ÙŠÙ„ â€” Ù„Ù„Ø®Ø¨Ø±Ø§Ø¡ ÙÙ‚Ø·',
            desc: 'ØªØ­Ø¯ÙŠØ§Øª Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ù…Ø¤Ø«Ø±Ø§Øª Ù‚ÙˆÙŠØ©ØŒ ÙˆØ³Ø±Ø¹Ø© ÙØ§Ø¦Ù‚Ø©',
            color: '#ff006e'
        },
        pro: {
            title: 'ğŸš€ Ù…ØªØ®ØµØµ â€” ØªØ¬Ø±Ø¨Ø© VIP',
            desc: 'Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©ØŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©ØŒ ÙˆØªØµÙ…ÙŠÙ… ÙØ±ÙŠØ¯',
            color: '#ff00cc'
        }
    };

    init() {
        this.bindEvents();
        this.loadSavedMode();
    }

    bindEvents() {
        this.modeButtons.forEach(btn => {
            // Ø¯Ø¹Ù… Ø§Ù„Ù†Ù‚Ø±
            btn.addEventListener('click', () => this.setMode(btn.dataset.mode));
            
            // Ø¯Ø¹Ù… Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            btn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.setMode(btn.dataset.mode);
                }
            });

            // ØªØ£Ø«ÙŠØ±Ø§Øª hover Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
            btn.addEventListener('mouseenter', () => {
                this.previewVisual.style.background = getComputedStyle(btn).color;
                this.previewVisual.style.opacity = '0.3';
            });
        });
    }

    setMode(mode) {
        localStorage.setItem('difficultyMode', mode);
        this.updateButtonStates(mode);
        this.updatePreview(mode);
        this.updateBodyClass(mode);
        
        // ØªØ£Ø«ÙŠØ± Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
        this.animatePreviewTransition();
        
        window.dispatchEvent(new CustomEvent('difficultyChanged', { detail: { mode } }));
    }

    updateButtonStates(mode) {
        this.modeButtons.forEach(btn => {
            const isSelected = btn.dataset.mode === mode;
            btn.setAttribute('aria-selected', isSelected);
            btn.setAttribute('tabindex', isSelected ? '0' : '-1');
        });
    }

    updatePreview(mode) {
        const data = this.modeData[mode];
        if (!data) return;

        this.previewTitle.textContent = data.title;
        this.previewDesc.textContent = data.desc;
        this.previewVisual.style.background = data.color;
        this.previewVisual.style.opacity = '0.2';
    }

    animatePreviewTransition() {
        this.previewBox.style.transform = 'scale(0.95)';
        this.previewBox.style.opacity = '0.7';
        
        requestAnimationFrame(() => {
            this.previewBox.style.transform = '';
            this.previewBox.style.opacity = '';
        });
    }

    updateBodyClass(mode) {
        document.body.classList.remove('mode-light', 'mode-medium', 'mode-heavy', 'mode-pro');
        document.body.classList.add(`mode-${mode}`);
    }

    loadSavedMode() {
        const savedMode = localStorage.getItem('difficultyMode') || 'light';
        this.setMode(savedMode);
    }
}

// ØªÙ‡ÙŠØ¦Ø©
document.addEventListener('DOMContentLoaded', () => {
    new DifficultySelectorEnhanced();
});</script>
</body>
</html>